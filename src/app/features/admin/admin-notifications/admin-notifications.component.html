<div class="space-y-6">
  <!-- Header -->
  <div class="flex justify-between items-center">
    <div>
      <h2 class="text-h2 font-display text-primary mb-2">Notifica√ß√µes da Empresa</h2>
      <p class="text-body-sm text-gray-600">
        <span *ngIf="unreadCount > 0">{{ unreadCount }} n√£o lida{{ unreadCount > 1 ? 's' : '' }}</span>
        <span *ngIf="unreadCount === 0">Todas as notifica√ß√µes foram lidas</span>
      </p>
    </div>
    <app-button
      *ngIf="unreadCount > 0"
      variant="outline"
      (click)="markAllAsRead()">
      Marcar todas como lidas
    </app-button>
  </div>

  <!-- Filters -->
  <div class="flex flex-wrap gap-2">
    <button
      (click)="filter = 'all'; applyFilters()"
      [class]="filter === 'all' 
        ? 'bg-primary text-white' 
        : 'bg-white text-gray-700 border border-gray-300'"
      class="px-4 py-2 rounded-medium text-body-sm font-medium transition-colors">
      Todas ({{ notifications.length }})
    </button>
    <button
      (click)="filter = 'unread'; applyFilters()"
      [class]="filter === 'unread' 
        ? 'bg-primary text-white' 
        : 'bg-white text-gray-700 border border-gray-300'"
      class="px-4 py-2 rounded-medium text-body-sm font-medium transition-colors">
      N√£o lidas ({{ unreadCount }})
    </button>
    
    <!-- Type Filter -->
    <select
      [(ngModel)]="typeFilter"
      (change)="applyFilters()"
      class="px-4 py-2 rounded-medium text-body-sm border border-gray-300 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
      <option value="all">Todos os tipos</option>
      <option value="ORDER">Pedidos</option>
      <option value="SUBSCRIPTION">Assinaturas</option>
      <option value="PAYMENT">Pagamentos</option>
      <option value="SYSTEM">Sistema</option>
      <option value="PROMOTION">Promo√ß√µes</option>
    </select>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="text-center py-12">
    <p class="text-gray-600">Carregando notifica√ß√µes...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && filteredNotifications.length === 0" class="text-center py-12">
    <div class="text-6xl mb-4">üîî</div>
    <p class="text-h4 text-gray-600 mb-2">
      {{ filter === 'unread' ? 'Nenhuma notifica√ß√£o n√£o lida' : 'Nenhuma notifica√ß√£o' }}
    </p>
    <p class="text-body-sm text-gray-500">
      {{ filter === 'unread' ? 'Voc√™ est√° em dia!' : 'Voc√™ ainda n√£o recebeu notifica√ß√µes' }}
    </p>
  </div>

  <!-- Notifications List -->
  <div *ngIf="!loading && filteredNotifications.length > 0" class="space-y-4">
    <app-card
      *ngFor="let notification of filteredNotifications"
      variant="default"
      [elevation]="1"
      padding="md"
      [class.opacity-75]="notification.read"
      class="transition-all">
      <div class="flex gap-4">
        <!-- Icon -->
        <div [class]="getNotificationColor(notification.type)" class="flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center text-2xl">
          {{ getNotificationIcon(notification.type) }}
        </div>

        <!-- Content -->
        <div class="flex-1 min-w-0 cursor-pointer" (click)="handleNotificationClick(notification)">
          <div class="flex justify-between items-start mb-2">
            <div class="flex items-center gap-2">
              <h3 class="text-body-lg font-semibold text-primary">{{ notification.title }}</h3>
              <span *ngIf="!notification.read" class="flex-shrink-0 w-2 h-2 bg-primary rounded-full"></span>
            </div>
            <span class="px-2 py-1 bg-gray-100 text-gray-600 text-caption rounded-medium">
              {{ notification.type }}
            </span>
          </div>
          <p class="text-body-sm text-gray-600 mb-2">{{ notification.message }}</p>
          <p class="text-caption text-gray-500">{{ formatDate(notification.created_at) }}</p>
          <p *ngIf="notification.type === 'ORDER' && notification.metadata?.['orderId']" 
             class="text-body-xs text-primary mt-2 font-medium">
            Clique para ver detalhes do pedido ‚Üí
          </p>
        </div>

        <!-- Actions -->
        <div class="flex-shrink-0 flex flex-col gap-2">
          <app-button
            *ngIf="!notification.read"
            variant="ghost"
            size="sm"
            (click)="markAsRead(notification)">
            Marcar como lida
          </app-button>
          <app-button
            variant="danger"
            size="sm"
            (click)="deleteNotification(notification)">
            Remover
          </app-button>
        </div>
      </div>
    </app-card>
  </div>
</div>

